<swiper>
  <div *ngFor="let tecnico of tecnicos$ | async; let i = index">
    <div class="card">

      <div class="row mt-4">
        <div class="col-md-2 text-center">
          <img [ngClass]="{
            'em_deslocamento_imagem': tecnico?.estado === 'em_deslocamento',
            'chegou_ao_destino_imagem': tecnico?.estado === 'chegou_ao_destino',
            'inicio_atendimento_imagem': tecnico?.estado === 'inicio_atendimento'}" *ngIf="tecnico?.foto_url" [src]="tecnico?.foto_url"
            alt="Foto técnico">
          <img [ngClass]="{
            'em_deslocamento_imagem': tecnico?.estado === 'em_deslocamento',
            'chegou_ao_destino_imagem': tecnico?.estado === 'chegou_ao_destino',
            'inicio_atendimento_imagem': tecnico?.estado === 'inicio_atendimento'}" *ngIf="!tecnico?.foto_url" src="/assets/img/avatar.png">
        </div>

        <div class="col-md-8">
          <h2> {{ tecnico?.nome }} |
            <small *ngIf="tecnico?.estado === 'em_deslocamento'">Em deslocamento</small>
            <small *ngIf="tecnico?.estado === 'chegou_ao_destino'">Chegou no cliente</small>
            <small *ngIf="tecnico?.estado === 'inicio_atendimento'">Atendimento iniciado</small>
            <small *ngIf="!tecnico?.estado">Disponível</small> </h2>


          <div class="row text-center">
            <div class="col-md-3">
              Atendimentos
              <p><i class="ion-settings"></i> {{ tecnico?.atendimentos?.length || 0}}</p>
            </div>
            <div class="col-md-3">
              Avaliação
              <p><i [ngClass]="{'ion-ios-star-half': tecnico?.media > 0, 'ion-star': tecnico?.media >= 3, 'ion-trophy': tecnico?.media === 5, 'ion-ios-star-outline': tecnico?.media === 0}"></i>                {{ tecnico?.media || 0 | number: '1.2-2'}}
              </p>
            </div>
            <div class="col-md-3">
              Concluidos
              <p><i class="ion-checkmark"></i> {{ tecnico?.concluido?.length || 0 }} / {{ tecnico?.atendimentos_hoje?.length
                }}</p>
            </div>
          </div>
        </div>

      </div>
      <div class="row">
        <div class="col-12">
          <hr [ngClass]="{
              'em_deslocamento_linha': tecnico?.estado === 'em_deslocamento',
              'chegou_ao_destino_linha': tecnico?.estado === 'chegou_ao_destino',
              'inicio_atendimento_linha': tecnico?.estado === 'inicio_atendimento' }">
        </div>
      </div>
      <div class="row">
        <div class="col-md-2">

        </div>
        <div class="col-md-8">
          <div class="row text-center">
              <div class="col-md-3">
                Atendimentos
              </div>
              <div class="col-md-3">
                Avaliação
              </div>
              <div class="col-md-3">
                Concluido
              </div>
            </div>
          <div *ngFor="let atendimento of tecnico?.atendimentos_hoje">
            <div class="row">
              <div class="col-md-3">
                <p><i class="ion-settings"></i> {{ atendimento.cliente.nome_razao_social}}</p>
              </div>
              <div class="col-md-3 text-center">
                <p><i [ngClass]="{'ion-ios-star-half': tecnico?.media > 0, 'ion-star': tecnico?.media >= 3, 'ion-trophy': tecnico?.media === 5, 'ion-ios-star-outline': tecnico?.media === 0}"></i>                  {{ atendimento.media }}
                </p>
              </div>
              <div class="col-md-3 text-center">
                <p><i class="ion-checkmark"></i> {{ atendimento.estado }}</p>
              </div>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</swiper>
