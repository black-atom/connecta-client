<div class="fundo row">

  <div class="cabecalho p-3 col-12">

    <div class="row">
      <div class="col-md col-xs-12">
        <img src="/assets/img/logo_realponto.png" alt="">
      </div>

      <div class="col-md-6 col-xs-12">
        <h3>REALPONTO COMÉRCIO E RELÓGIO DE PONTO </h3>
        <p> <i class="ion-location"></i> Rua Dr.Cincinato Braga, 296 - Planalto, São Bernardo do Campo, S.P.</p>
        <p> <i class="ion-android-call"></i> (011) 4332-4040 | (011) 4394-2140 </p>
      </div>
    </div>
    <div class="pt-3" style="border-bottom: 1px dashed grey; opacity: 0.5;"></div>
  </div>

  <h2 class="text-center pb-3">Detalhes do atendimento</h2>

  <div class="informacao_cliente col-12">

    <div class="row">

      <div class="col-md-4">

        <h6 class="text-center">Informações principais</h6>

        <div class="conteudo p-2">
          <p><strong>Cliente:</strong> {{ atendimento?.cliente.nome_razao_social }} </p>
          <p *ngIf="atendimento?.cliente.cnpj_cpf.length > 11"><strong>CNPJ:</strong> {{ atendimento?.cliente.cnpj_cpf }} </p>
          <p *ngIf="atendimento?.cliente.cnpj_cpf.length < 11"><strong>CPF:</strong> {{ atendimento?.cliente.cnpj_cpf }} </p>
          <p *ngIf="atendimento?.cliente.inscricao_estadual"><strong>Inscricao estadual:</strong> {{ atendimento?.cliente.inscricao_estadual }}</p>
          <p *ngIf="atendimento?.cliente.nome_fantasia"><strong>Nome fantasia:</strong> {{ atendimento?.cliente.nome_fantasia }}</p>
        </div>

      </div>

      <div class="col-md-4">

        <h6 class="text-center">Contato</h6>

        <div class="conteudo p-2">
          <p><strong>Contato:</strong> {{ atendimento?.contato.nome }} </p>
          <p><strong>E-mail:</strong> {{ atendimento?.contato.email }} </p>
          <p><strong>Telefone:</strong> {{ atendimento?.contato.telefone }} </p>
          <p *ngIf="atendimento?.contato.celular"><strong>Celular:</strong> {{ atendimento?.contato.celular }}</p>
          <p *ngIf="atendimento?.contato.observacao"><strong>Observação:</strong> {{ atendimento?.contato.observacao }}</p>
        </div>

      </div>

      <div class="col-md-4">

        <h6 class="text-center">Endereço</h6>

        <div class="conteudo p-2">
          <p style="line-height: 20px;">
            <strong>Logradouro:</strong> {{ atendimento?.endereco.rua }}, {{atendimento?.endereco.numero}}, {{ atendimento?.endereco.bairro}},
            {{ atendimento?.endereco.cidade }}, {{ atendimento?.endereco.uf }} - {{ atendimento?.endereco.cep }}
          </p>
          <p><strong>Estacionamento:</strong> {{ atendimento?.estacionamento }}</p>
        </div>
      </div>

      <div class="pl-3 pt-2 text-center " [ngClass]=" {
        associado: atendimento?.estado === 'associado',
        em_deslocamento: atendimento?.estado === 'em_deslocamento',
        chegou_ao_destino: atendimento?.estado === 'chegou_ao_destino',
        inicio_atendimento: atendimento?.estado === 'inicio_atendimento',
        fim_do_atendimento: atendimento?.estado === 'fim_do_atendimento'}">

        <p *ngIf="atendimento?.estado === 'associado'">STATUS DO ATENDIMENTO</p>
        <p *ngIf="atendimento?.estado === 'em_deslocamento'">STATUS: EM DESLOCAMENTO</p>
        <p *ngIf="atendimento?.estado === 'chegou_ao_destino'">STATUS: CHEGOU AO DESTINO</p>
        <p *ngIf="atendimento?.estado === 'inicio_atendimento'">STATUS: INÍCIO DO ATENDIMENTO</p>
        <p *ngIf="atendimento?.estado === 'fim_do_atendimento'">STATUS: CONCLUÍDO</p>
      </div>
    </div>

    <div class="row">
      <div class="col-12 chamado mt-2">
        <div class="row">

          <div class="col-4">
            <div class="conteudo p-2">
              <p><strong>Criado em:</strong> {{ atendimento?.createdAt | date: 'dd/MM/yy' }}</p>
              <p><strong>Data do atendimento:</strong> {{ atendimento?.data_atendimento | date: 'dd/MM/yy'}}</p>
              <p><strong>Descrição:</strong> {{ atendimento?.descricao }}</p>
            </div>
          </div>

          <div class="col-4">
            <div class="conteudo p-2">
              <p><strong>Aberto por: </strong> <span style="text-transform: capitalize">{{ atendimento?.createdBy }}</span></p>
              <p><strong>Tipo: </strong> {{ atendimento?.tipo }}</p>
              <p><strong>Testes efetuados:</strong> {{ atendimento?.testes_efetuados }}</p>
            </div>
          </div>

          <div class="col-4">
            <div class="conteudo p-2">
              <p *ngIf="atendimento?.valor"><strong>Valor: </strong> {{ atendimento?.valor }}</p>
              <p *ngIf="atendimento?.autorizado"><strong>Valor: </strong> {{ atendimento?.autorizado }}</p>
              <p><strong>Modelo:</strong> {{ atendimento?.modelo_equipamento }} </p>
              <p><strong>Número:</strong> {{ atendimento?.numero_equipamento }} </p>
            </div>
          </div>
        </div>

        <div class="pt-3" style="border-bottom: 1px dashed grey; opacity: 0.5;"></div>

      </div>
    </div>
  </div>

  <div class="informacoes-km col-12 mt-3">
    <div class="row">
      <div class="col-12">
        <div class="row">
          <div class="col-4">
            <div class="conteudo p-2">
              <p *ngIf="atendimento?.tecnico.nome"><strong>Técnico:</strong> {{ atendimento?.tecnico.nome }}</p>
            </div>
          </div>

          <div class="col-4">
            <div class="conteudo p-2">
              <p *ngIf="atendimento?.inicio"><strong>Atendimento iniciado às:</strong> {{ atendimento?.inicio | date: 'HH:mm' }}</p>
              <p *ngIf="atendimento?.km_inicio.data"><strong>KM inicial às:</strong> {{ atendimento?.km_inicio.data | date: 'HH:mm'}}</p>
              <p *ngIf="atendimento?.km_inicio.km"><strong>KM inicial:</strong> {{atendimento?.km_inicio.km }} km</p>
            </div>
          </div>

          <div class="col-4">
            <div class="conteudo p-2">
              <p *ngIf="atendimento?.fim"><strong>Atendimento finalizado às:</strong> {{ atendimento?.fim | date: 'HH:mm' }}</p>
              <p *ngIf="atendimento?.km_final.data"><strong>KM final às:</strong> {{ atendimento?.km_final.data | date: 'HH:mm' }}</p>
              <p *ngIf="atendimento?.km_final.km"><strong>KM final:</strong> {{atendimento?.km_final.km }} km</p>
            </div>
          </div>
        </div>

        <div class="pt-3" style="border-bottom: 1px dashed grey; opacity: 0.5;"></div>

        <div class="fotos-inicio col-12" *ngIf="fotosInicioAtendimento.length > 0">
          <div class="row">
            <div class="col-12 text-center">
              <h4 class="mt-2"> Fotos do início do atendimento </h4>
              <div class="row">
                <div class="col-md-2 mt-2" *ngFor="let img of fotosInicioAtendimento; let i = index">
                  <div class="imagem">
                    <img class="img-thumbnail" (click)="abrirFotosInicioAtendimento(i)" [src]="img?.thumb" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>


        <div class="fotos-final col-12" *ngIf="fotosFinalAtendimento.length > 0">
          <div class="row">
            <div class="col-12 text-center">
              <h4 class="mt-2"> Fotos do final do atendimento </h4>
              <div class="row">
                <div class="col-md-2 mt-2" *ngFor="let img of fotosFinalAtendimento; let i = index">
                  <div class="imagem">
                    <img class="img-thumbnail" (click)="abrirFotosFinalAtendimento(i)" [src]="img?.thumb" alt="">
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>


      </div>
